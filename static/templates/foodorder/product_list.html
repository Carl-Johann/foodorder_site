{% include 'foodorder/navbar.html' %}
{% load static %}
<html>
<!doctype html>
<head>


<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

</head>
<body>
{% block content %}    





{% if is_past_allowed_time == False %}    

<div class="product_list_main">
    <div class="main main-raised product_list_main">
        <div class="container-fluid">
        <table id="sort-table" class="table product_table" data-sort-order="asc">            
            
            <thead>                

                <!--<div class="container">-->
                    <div class="form-group label-floating">
                        <label class="control-label">Søg efter produkter</label>               
                        <input class="form-control label-floating" type="text" id="search_input" onkeyup="search_in_product_table()" >
                    </div>                                        
                <!--</div>-->
                
                <tr>                    
                    <th class="text-center product_nr_th" id="no-padding"> <a class="order_button" onclick="order(0)"> Nr </a></th>
                    <th class="text-left  "  id="no-padding"> Produkt </th> 
                    <th class="text-center"  id="no-padding"> Antal små </th> 
                    <th class="text-center"  id="no-padding"> <a class="order_button" onclick="order(3)"> Pris Lille </a></th>
                    <th class="text-center"  id="no-padding"> Antal store </th>
                    <th class="text-center"  id="no-padding"> <a class="order_button" onclick="order(5)"> Pris Stor </a></th>                    
                </tr>

            </thead>                            

            <tbody>
                    <div class="container-fluid">                        
                        {% for product in products %}                                                    
                            <tr id="{{ product.pk }}" id="no-padding">                                                                
                                <td class="text-center product_nr_td" id="no-padding"> {{ product.nr }} </td>
                                <td id="no-padding"> {{ product.title }} </td>
                                <td class="text-center" id="no-padding"> <input id="quantity_small_{{ forloop.counter }}" style="margin-bottom: 20px; text-align: center;" class="form-control" placeholder="Små" form="form" min="0" type="number"> </td>
                                <td class="text-center" id="no-padding"> {{ product.small_product_price }} </td>
                                <td class="text-center" id="no-padding"> {% if product.large_product_price != 0 %} <input id="quantity_large_{{ forloop.counter }}" style="margin-bottom: 20px; text-align: center;" placeholder="Stor" class="form-control" form="form" min="0" type="number"> {% endif %} </td>
                                <td class="text-center" id="no-padding"> {% if product.large_product_price != 0 %} {{ product.large_product_price }} {% endif %} </td> 
                            </tr>                            
                        {% endfor %}                                                
                        
                    </div>                
            </tbody>
                    
        </table>
        </div>
        <div class="text-right bekraeft_button">                     
            <a class="btn btn-success btn-sblock" type="submit" form="form" data-toggle="modal" href="#cartModal"> Bekræft </a>
        </div>                 
        
        <br>
    </div>
</div>



<div class="modal fade" id="cartModal">
    <br><br><br>
    <div class="container">
        <div class="modal-dialog animated" style="width: 100%; margin: auto;">
            <div class="modal-content">
                <div class="modal-header">
                    <button  type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    
                    <h4 class="modal-title" > Bekræft Bestilling </h4>
                </div>

                <div class="container" id="modal-table-container" style="text-align: center; display: none;">
                    <br>
                    <h3> Ingen produkter tilføjet </h3>
                </div>

                <div class="modal-body" id="modal-body">
                    <form action="{% url 'create_items_and_order' %}" method="post" id="modal-cart-form"> {% csrf_token %}
                        <table id="modal-table" class="table modal-cart-table" data-sort-order="desc">
                            <tbody>
                                <div class="order_succes_alert alert alert-success" style="display: none;" >
                                    <div class="container-fluid">                                                                                        
                                        <i class="fa fa-check" aria-hidden="true" style="padding-right:1em;"></i>                                     
                                        Din mad er nu bestilt <i class="fa fa-smile-o" aria-hidden="true"></i>
                                    </div>
                                </div>
                            </tbody>
                        </table>
                        
                        <div class="text-right">
                            <button onclick="confirmOrder()" id="confirm_order_btn load" class="confirm_order_btn btn btn-lg btn-success" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Bestiller "> Bestil </button>
                        </div>

                    </form>
                </div>                                
            </div>
        </div>
    </div>
</div>
{% else %}
    <br><br><br><br><br>
    <div class="container" style="text-align: center">    
        <h1>Du kan ikke bestille mere mad idag.</h1>
    </div>
{% endif %}
<script src="{% static 'product-modal.js' %}" type="text/javascript"></script>
<script src="{% static 'tablesorter.js' %}" type="text/javascript"></script>

{% endblock content %}
</body>
</html>